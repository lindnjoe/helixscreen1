<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- Network Settings Overlay Panel -->
<!-- Displays WiFi and Ethernet status with available networks for connection -->
<component>
  <!-- NOTE: All subjects for this overlay are managed by C++ (NetworkSettingsOverlay::init_subjects).
       Do NOT declare subjects here - XML declarations shadow C++ subjects [L046]. -->
  <view name="network_settings_overlay"
        extends="overlay_panel" width="#overlay_panel_width_full" title="Network Settings" bg_color="#app_bg">
    <!-- Two-Column Content Area -->
    <lv_obj name="content_area"
            width="100%" flex_grow="1" style_bg_opa="0" style_pad_all="#space_lg" style_pad_gap="#space_lg"
            scrollable="false" style_border_width="0" flex_flow="row" style_flex_main_place="start"
            style_flex_cross_place="start">
      <!-- ================================================================== -->
      <!-- LEFT COLUMN (40%) - WiFi status, Ethernet status, network test -->
      <!-- ================================================================== -->
      <lv_obj height="100%"
              flex_grow="4" style_bg_opa="0" style_border_width="0" style_pad_all="0" style_pad_gap="#space_sm"
              scrollable="false" flex_flow="column" style_flex_main_place="start" style_flex_cross_place="start">
        <!-- ============================================================== -->
        <!-- WiFi Status Card (Combined toggle + connection status) -->
        <!-- ============================================================== -->
        <lv_obj name="wifi_status_card"
                width="100%" height="content" style_bg_color="#app_bg" style_bg_opa="255" style_radius="#border_radius"
                style_border_width="0" style_pad_all="#space_md" scrollable="false" flex_flow="column"
                style_pad_gap="#space_xs">
          <!-- Disable card when WiFi hardware unavailable -->
          <bind_state_if_eq subject="wifi_hardware_available" state="disabled" ref_value="0"/>
          <!-- Header Row: WiFi label + toggle -->
          <lv_obj width="100%"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_main_place="space_between" style_flex_cross_place="center">
            <!-- Label with optional band warning -->
            <lv_obj height="content"
                    flex_grow="1" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                    flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
              <text_body text="WiFi"/>
              <!-- Band limitation indicator -->
              <text_small text="(2.4GHz)">
                <bind_flag_if_eq subject="wifi_only_24ghz" flag="hidden" ref_value="0"/>
              </text_small>
            </lv_obj>
            <!-- Toggle Switch -->
            <ui_switch name="wlan_toggle" size="small">
              <bind_state_if_eq subject="wifi_hardware_available" state="disabled" ref_value="0"/>
              <bind_state_if_eq subject="wifi_enabled" state="checked" ref_value="1"/>
              <event_cb trigger="value_changed" callback="on_wlan_toggle_changed"/>
            </ui_switch>
          </lv_obj>
          <!-- Divider line -->
          <divider_horizontal/>
          <!-- WiFi Status Container - only ONE child visible at a time -->
          <lv_obj name="wifi_status_container"
                  width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                  scrollable="false" flex_flow="column" style_pad_gap="0">
            <!-- Hardware Unavailable (shown when wifi_hardware_available == 0) -->
            <lv_obj name="wifi_unavailable_state"
                    width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                    scrollable="false" flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
              <bind_flag_if_eq subject="wifi_hardware_available" flag="hidden" ref_value="1"/>
              <icon src="wifi_off" size="sm" variant="secondary"/>
              <text_small text="WiFi hardware unavailable"/>
            </lv_obj>
            <!-- Connected (shown when wifi_connected == 1) -->
            <lv_obj name="wifi_connected_state"
                    width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                    scrollable="false" flex_flow="column" style_pad_gap="#space_xs">
              <bind_flag_if_eq subject="wifi_connected" flag="hidden" ref_value="0"/>
              <!-- SSID row with checkmark and signal -->
              <lv_obj width="100%"
                      height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                      flex_flow="row" style_flex_main_place="start" style_flex_cross_place="center"
                      style_pad_gap="#space_xs">
                <icon src="check_circle" size="sm" variant="success"/>
                <text_body name="ssid_label" bind_text="connected_ssid"/>
                <lv_obj height="1" flex_grow="1" style_bg_opa="0" style_border_width="0" scrollable="false"/>
                <icon src="wifi_strength_4" size="sm" variant="accent"/>
              </lv_obj>
              <!-- IP Address -->
              <lv_obj width="100%"
                      height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                      flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_xs">
                <text_small text="IP:"/>
                <text_small name="ip_label" bind_text="ip_address" style_text_color="#text"/>
              </lv_obj>
              <!-- MAC Address -->
              <lv_obj width="100%"
                      height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                      flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_xs">
                <text_small text="MAC:"/>
                <text_small name="mac_label" bind_text="mac_address" style_text_color="#text"/>
              </lv_obj>
            </lv_obj>
            <!-- Disconnected (shown when wifi_connected == 0 AND hardware available) -->
            <lv_obj name="wifi_disconnected_state"
                    width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                    scrollable="false" flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
              <bind_flag_if_eq subject="wifi_connected" flag="hidden" ref_value="1"/>
              <icon src="wifi_off" size="sm" variant="secondary"/>
              <text_small text="Not connected"/>
            </lv_obj>
          </lv_obj>
        </lv_obj>
        <!-- ============================================================== -->
        <!-- Ethernet Status Card (Read-only) -->
        <!-- ============================================================== -->
        <lv_obj name="ethernet_status_card"
                width="100%" height="content" style_bg_color="#app_bg" style_bg_opa="255" style_radius="#border_radius"
                style_border_width="0" style_pad_all="#space_md" scrollable="false" flex_flow="column"
                style_pad_gap="#space_xs">
          <!-- Header Row: Ethernet label -->
          <lv_obj width="100%"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_main_place="start" style_flex_cross_place="center"
                  style_pad_gap="#space_sm">
            <icon src="ethernet" size="sm" variant="secondary"/>
            <text_body text="Ethernet"/>
          </lv_obj>
          <!-- Divider line -->
          <divider_horizontal/>
          <!-- Ethernet Status Container - only ONE child visible at a time -->
          <lv_obj name="eth_status_container"
                  width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                  scrollable="false" flex_flow="column" style_pad_gap="0">
            <!-- Connected State (shown when eth_connected == 1) -->
            <lv_obj name="eth_connected_state"
                    width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                    scrollable="false" flex_flow="column" style_pad_gap="#space_xs">
              <bind_flag_if_eq subject="eth_connected" flag="hidden" ref_value="0"/>
              <!-- Connected indicator with IP -->
              <lv_obj width="100%"
                      height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                      flex_flow="row" style_flex_main_place="start" style_flex_cross_place="center"
                      style_pad_gap="#space_xs">
                <icon src="check_circle" size="sm" variant="success"/>
                <text_body text="Connected"/>
              </lv_obj>
              <!-- IP Address -->
              <lv_obj width="100%"
                      height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                      flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_xs">
                <text_small text="IP:"/>
                <text_small name="eth_ip_label" bind_text="eth_ip_address" style_text_color="#text"/>
              </lv_obj>
              <!-- MAC Address -->
              <lv_obj width="100%"
                      height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                      flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_xs">
                <text_small text="MAC:"/>
                <text_small name="eth_mac_label" bind_text="eth_mac_address" style_text_color="#text"/>
              </lv_obj>
            </lv_obj>
            <!-- Disconnected State (shown when eth_connected == 0) -->
            <lv_obj name="eth_disconnected_state"
                    width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                    scrollable="false" flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
              <bind_flag_if_eq subject="eth_connected" flag="hidden" ref_value="1"/>
              <icon src="ethernet" size="sm" variant="secondary"/>
              <text_small text="Not connected"/>
            </lv_obj>
          </lv_obj>
        </lv_obj>
        <!-- Spacer to push Test Network button to bottom -->
        <lv_obj width="100%" flex_grow="1" style_bg_opa="0" style_border_width="0" scrollable="false"/>
        <!-- ============================================================== -->
        <!-- Network Test Button (at bottom of left column) -->
        <!-- ============================================================== -->
        <lv_button name="test_network_btn"
                   width="100%" height="content" style_radius="#border_radius" style_border_width="0"
                   style_pad_ver="#space_sm">
          <!-- Disable when no network connected -->
          <bind_state_if_eq subject="any_network_connected" state="disabled" ref_value="0"/>
          <lv_obj width="100%"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_main_place="center" style_flex_cross_place="center"
                  style_pad_gap="#space_sm" clickable="false">
            <icon src="lan" size="sm" variant="primary"/>
            <text_body text="Test Network"/>
          </lv_obj>
          <event_cb trigger="clicked" callback="on_test_network_clicked"/>
        </lv_button>
      </lv_obj>
      <!-- Vertical Divider -->
      <divider_vertical/>
      <!-- ================================================================== -->
      <!-- RIGHT COLUMN (60%) - Available networks list -->
      <!-- ================================================================== -->
      <lv_obj height="100%"
              flex_grow="6" style_bg_opa="0" style_border_width="0" style_pad_all="0" style_pad_gap="#space_md"
              scrollable="false" flex_flow="column" style_flex_main_place="start" style_flex_cross_place="start">
        <!-- Header Row: Title + Count + Refresh Button -->
        <lv_obj width="100%"
                height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                flex_flow="row" style_flex_main_place="space_between" style_flex_cross_place="center">
          <!-- Title with count -->
          <lv_obj width="content"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
            <text_body text="Available networks"/>
            <text_small name="network_count_label" bind_text="network_count"/>
          </lv_obj>
          <!-- Refresh Button -->
          <lv_button name="refresh_btn"
                     width="content" height="36" style_radius="#border_radius" style_border_width="0"
                     style_pad_left="#space_lg" style_pad_right="#space_lg">
            <bind_state_if_eq subject="wifi_scanning" state="disabled" ref_value="1"/>
            <bind_state_if_eq subject="wifi_hardware_available" state="disabled" ref_value="0"/>
            <lv_obj width="content"
                    height="100%" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                    flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_xs">
              <!-- Static refresh icon (shown when not scanning) -->
              <icon name="refresh_icon" src="refresh" size="xs" variant="primary">
                <bind_flag_if_eq subject="wifi_scanning" flag="hidden" ref_value="1"/>
              </icon>
              <!-- Spinner (shown when scanning) -->
              <spinner name="scan_spinner" size="xs" hidden="true">
                <bind_flag_if_eq subject="wifi_scanning" flag="hidden" ref_value="0"/>
              </spinner>
            </lv_obj>
            <event_cb trigger="clicked" callback="on_refresh_clicked"/>
          </lv_button>
        </lv_obj>
        <!-- Networks List Container (scrollable) -->
        <lv_obj name="networks_list"
                width="100%" flex_grow="1" style_bg_color="#app_bg" style_bg_opa="255" style_radius="#border_radius"
                style_border_width="0" style_pad_all="0" scrollable="true" scroll_dir="VER" scroll_elastic="false"
                style_clip_corner="true" flex_flow="column">
          <!-- wifi_network_item components are created here dynamically by C++ -->
          <!-- Placeholder when hardware unavailable (shown when wifi_hardware_available == 0) -->
          <lv_obj name="wifi_hardware_unavailable_placeholder"
                  width="100%" flex_grow="1" style_bg_opa="0" style_border_width="0" scrollable="false">
            <bind_flag_if_eq subject="wifi_hardware_available" flag="hidden" ref_value="1"/>
            <empty_state icon="wifi_off" text="WiFi control unavailable" icon_size="md"/>
          </lv_obj>
          <!-- Placeholder when no networks (shown when WiFi disabled AND hardware available) -->
          <lv_obj name="wifi_disabled_placeholder"
                  width="100%" flex_grow="1" style_bg_opa="0" style_border_width="0" scrollable="false">
            <bind_flag_if_eq subject="wifi_enabled" flag="hidden" ref_value="1"/>
            <bind_flag_if_eq subject="wifi_hardware_available" flag="hidden" ref_value="0"/>
            <empty_state icon="wifi_off" text="Enable WiFi to scan" icon_size="md"/>
          </lv_obj>
          <!-- Scanning indicator (shown when scanning) -->
          <lv_obj name="scanning_placeholder"
                  width="100%" flex_grow="1" style_bg_opa="0" style_border_width="0" style_pad_all="#space_lg"
                  scrollable="false" flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center"
                  style_flex_track_place="center" hidden="true">
            <bind_flag_if_eq subject="wifi_scanning" flag="hidden" ref_value="0"/>
            <spinner size="md"/>
            <text_small text="Scanning for networks..." style_margin_top="#space_sm"/>
          </lv_obj>
        </lv_obj>
        <!-- Add Hidden Network Button -->
        <lv_button name="add_other_btn"
                   width="100%" height="content" style_radius="#border_radius" style_border_width="0"
                   style_pad_ver="#space_sm">
          <bind_state_if_eq subject="wifi_hardware_available" state="disabled" ref_value="0"/>
          <lv_obj width="100%"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_main_place="center" style_flex_cross_place="center"
                  style_pad_gap="#space_sm" clickable="false">
            <icon src="wifi" size="sm" variant="primary"/>
            <text_body text="Add Hidden Network"/>
          </lv_obj>
          <event_cb trigger="clicked" callback="on_add_other_clicked"/>
        </lv_button>
      </lv_obj>
    </lv_obj>
  </view>
</component>
